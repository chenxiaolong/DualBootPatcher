<?xml version="1.0"?>
<recovery>
    <styles>
        <style name="text_l">
            <font resource="font_l" color="%text_color%" />
        </style>

        <style name="text_m">
            <font resource="font_m" color="%text_color%" />
        </style>

        <style name="text_m_accent">
            <font resource="font_m" color="%accent_color%" />
        </style>

        <style name="text_m_fail">
            <font resource="font_m" color="%text_fail_color%" />
        </style>

        <style name="text_s">
            <font resource="font_s" color="%text_color%" />
        </style>

        <style name="input">
            <background color="%background_color%" />
            <cursor color="%accent_color%" hasfocus="1" width="%input_line_width%" />
            <font resource="font_m" color="%text_color%" />
        </style>

        <style name="checkbox">
            <font resource="font_m" color="%text_color%" />
            <image checked="checkbox_true" unchecked="checkbox_false" />
        </style>

        <style name="main_button">
            <highlight color="%highlight_color%" />
            <font resource="font_l" color="%text_button_color%" />
            <image resource="main_button" />
        </style>

        <style name="main_button_half_height">
            <highlight color="%highlight_color%" />
            <font resource="font_m" color="%text_button_color%" />
            <image resource="main_button_half_height" />
        </style>

        <style name="main_button_half_height_full_width">
            <highlight color="%highlight_color%" />
            <font resource="font_m" color="%text_button_color%" />
            <image resource="main_button_half_height_full_width" />
        </style>

        <style name="button_third_width">
            <highlight color="%highlight_color%" />
            <font resource="font_m" color="%text_button_color%" />
            <image resource="tab_3" />
        </style>

        <style name="button_quarter_width">
            <highlight color="%highlight_color%" />
            <font resource="font_m" color="%text_button_color%" />
            <image resource="tab_4" />
        </style>

        <style name="tab">
            <highlight color="%highlight_color%" />
            <fill color="%transparent%" />
            <font resource="font_s" color="%text_button_color%" />
        </style>

        <style name="console">
            <fastscroll rectcolor="%accent_color%" w="%fastscroll_w%" rectw="%fastscroll_rectw%" recth="%fastscroll_recth%" />
            <color foreground="%text_color%" background="%background_color%" scroll="%background_color%" />
            <font resource="fixed" />
        </style>

        <style name="listbox">
            <highlight color="%fileselector_highlight_color%" />
            <header background="%background_color%" textcolor="%accent_color%" separatorcolor="%accent_color%" separatorheight="%fileselector_separatorheight%" />
            <fastscroll linecolor="%fileselector_linecolor%" rectcolor="%accent_color%" w="%fastscroll_w%" linew="%fastscroll_linew%" rectw="%fastscroll_rectw%" recth="%fastscroll_recth%" />
            <separator color="%fileselector_linecolor%" height="%fileselector_separatorheight%" />
            <icon selected="radio_true" unselected="radio_false" />
            <background color="%background_color%" />
            <font resource="font_m" spacing="%fileselector_spacing%" color="%text_color%" highlightcolor="%accent_color%" />
        </style>

        <style name="scrolllist">
            <background color="%background_color%" />
            <font resource="font_m" spacing="%fileselector_spacing%" color="%text_color%" />
        </style>

        <style name="slider">
            <placement x="%center_x%" y="%row23_y%" />
            <font resource="font_s" color="%text_color%" />
            <resource base="slider" used="slider_used" touch="slider_touch" />
        </style>

        <style name="slidervalue">
            <resource handle="handle" />
            <font resource="font_m" color="%text_color%" />
            <colors line="%fileselector_linecolor%" />
            <dimensions lineh="%slidervalue_lineh%" linepadding="%slidervalue_padding%" sliderw="%slidervalue_sliderw%" sliderh="%slidervalue_sliderh%" />
        </style>

        <style name="patternpassword">
            <size name="tw_gui_pattern_grid_size" default="3" />
        </style>
    </styles>

    <pages>
        <!-- Main page. Clears status variables before redirecting to the 'real' main page (main2) -->
        <page name="main">
            <action>
                <actions>
                    <action function="set">tw_clear_destination=main2</action>
                    <action function="page">clear_vars</action>
                </actions>
            </action>
        </page>

        <!-- Real main page. Contains the top level buttons that the user sees -->
        <page name="main2">
            <template name="page" />

            <!-- Primary header -->
            <text style="text_l">
                <placement x="%col1_x_header%" y="%row3_header_y%" />
                <text>{@app_name}</text>
            </text>

            <!-- Secondary header -->
            <text style="text_m">
                <condition var1="tw_no_cpu_temp" var2="0" />
                <placement x="%col1_x_header%" y="%row4_header_y%" />
                <text>%tw_version%</text>
            </text>

            <!-- Button to go to the Switch ROM page -->
            <button style="main_button">
                <placement x="%indent%" y="%row2a_y%" />
                <text>{@title_switch_rom}</text>
                <action function="page">switch_rom</action>
            </button>

            <!-- Button to go to the settings page -->
            <button style="main_button">
                <placement x="%center_x%" y="%row13a_y%" />
                <text>{@title_settings}</text>
                <action function="page">settings</action>
            </button>

            <!-- Button to go to the advanced options page -->
            <!--
            <button style="main_button">
                <placement x="%indent%" y="%row19_y%" />
                <text>{@title_advanced}</text>
                <action function="page">advanced</action>
            </button>
            -->

            <!-- Button to go to the reboot page -->
            <button style="main_button">
                <placement x="%center_x%" y="%row19_y%" />
                <text>{@title_reboot}</text>
                <action function="page">reboot</action>
            </button>
        </page>

        <!-- Clears status and state variables, then redirects to specified page -->
        <page name="clear_vars">
            <action>
                <action function="set">tw_operation_state=0</action>
                <action function="set">tw_text1=</action>
                <action function="set">tw_text2=</action>
                <action function="set">tw_text3=</action>
                <action function="set">tw_text4=</action>
                <action function="set">tw_action_text1=</action>
                <action function="set">tw_action_text2=</action>
                <action function="set">tw_action_param=</action>
                <action function="set">tw_has_action2=0</action>
                <action function="set">tw_action2=</action>
                <action function="set">tw_action2_param=</action>
                <!-- Whether a custom action button should be shown on action_page -->
                <action function="set">tw_has_custom_action=0</action>
                <!-- Text to show on custom action button -->
                <action function="set">tw_custom_action_text=</action>
                <!-- Action to perform upon pressing the custom action button -->
                <action function="set">tw_custom_action=</action>
                <!-- Parameter to action function specified by %tw_custom_action% -->
                <action function="set">tw_custom_action_param=</action>
                <!-- Whether the custom action button was pressed -->
                <action function="set">tw_custom_action_selected=0</action>
                <!-- Whether to redirect to %tw_custom_action_page% if the custom action button is pressed -->
                <action function="set">tw_has_custom_action_page=0</action>
                <!-- Custom page in which to redirect if the custom action button is pressed -->
                <action function="set">tw_custom_action_page=</action>
                <!-- Whether a cancel button should be shown on action_page -->
                <action function="set">tw_has_cancel=0</action>
                <!-- Action to perform upon canceling an operation -->
                <action function="set">tw_cancel_action=</action>
                <!-- Parameter to action function specified by %tw_cancel_action% -->
                <action function="set">tw_cancel_param=</action>
                <!-- Whether the cancel button was pressed -->
                <action function="set">tw_canceled=0</action>
                <!-- Whether to redirect to %tw_custom_cancel_page% instead of action_complete when the operation is canceled -->
                <action function="set">tw_has_custom_cancel_page=0</action>
                <!-- Custom page in which to redirect if the operation is canceled -->
                <action function="set">tw_custom_cancel_page=</action>
                <!-- Whether to redirect to %tw_custom_finish_page% instead of action_complete when the operation finishes -->
                <action function="set">tw_has_custom_finish_page=0</action>
                <!-- Custom page in which to redirect if the operation finishes -->
                <action function="set">tw_custom_finish_page=</action>
                <!-- Page in which to redirect after the variables above have been set -->
                <action function="page">%tw_clear_destination%</action>
            </action>
        </page>

        <!-- Action page containing a console and, optionally, a cancel button -->
        <page name="action_page">
            <template name="page" />

            <!-- Primary header -->
            <text style="text_l">
                <placement x="%col1_x_header%" y="%row3_header_y%" />
                <text>%tw_action_text1%</text>
            </text>

            <!-- Secondary header -->
            <text style="text_m">
                <placement x="%col1_x_header%" y="%row4_header_y%" />
                <text>%tw_action_text2%</text>
            </text>

            <!-- Console output -->
            <template name="console" />

            <!-- Progress bar -->
            <template name="progress_bar" />

            <!-- Custom button -->
            <button style="main_button_half_height">
                <condition var1="tw_has_custom_action" var2="1" />
                <placement x="%indent%" y="%row21a_y%" />
                <text>%tw_custom_action_text%</text>
                <actions>
                    <action function="set">tw_custom_action_selected=1</action>
                    <action function="%tw_custom_action%">%tw_custom_action_param%</action>
                </actions>
            </button>

            <!-- Go to custom page if custom action button clicked -->
            <action>
                <condition var1="tw_operation_state" var2="1" />
                <condition var1="tw_custom_action_selected" op="!=" var2="0" />
                <condition var1="tw_has_custom_action_page" op="!=" var2="0" />
                <actions>
                    <action function="page">%tw_custom_action_page%</action>
                </actions>
            </action>

            <!-- Cancel button -->
            <button style="main_button_half_height">
                <condition var1="tw_has_cancel" var2="1" />
                <placement x="%center_x%" y="%row21a_y%" />
                <text>{@cancel}</text>
                <actions>
                    <action function="set">tw_canceled=1</action>
                    <action function="%tw_cancel_action%">%tw_cancel_param%</action>
                </actions>
            </button>

            <!-- Go to action_complete page if canceled -->
            <action>
                <condition var1="tw_operation_state" var2="1" />
                <condition var1="tw_canceled" op="!=" var2="0" />
                <condition var1="tw_has_custom_cancel_page" op="=" var2="0" />
                <actions>
                    <action function="page">action_complete</action>
                </actions>
            </action>

            <!-- Go to custom page if canceled -->
            <action>
                <condition var1="tw_operation_state" var2="1" />
                <condition var1="tw_canceled" op="!=" var2="0" />
                <condition var1="tw_has_custom_cancel_page" op="!=" var2="0" />
                <actions>
                    <action function="page">%tw_custom_cancel_page%</action>
                </actions>
            </action>

            <!-- Go to action_complete page if finished -->
            <action>
                <condition var1="tw_operation_state" var2="1" />
                <condition var1="tw_canceled" op="=" var2="0" />
                <condition var1="tw_has_custom_finish_page" op="=" var2="0" />
                <actions>
                    <action function="page">action_complete</action>
                </actions>
            </action>

            <!-- Go to custom page if finished -->
            <action>
                <condition var1="tw_operation_state" var2="1" />
                <condition var1="tw_canceled" op="=" var2="0" />
                <condition var1="tw_has_custom_finish_page" op="!=" var2="0" />
                <actions>
                    <action function="page">%tw_custom_finish_page%</action>
                </actions>
            </action>

            <!-- Execute custom action -->
            <action>
                <actions>
                    <action function="%tw_action%">%tw_action_param%</action>
                </actions>
            </action>

            <!-- Execute optional second custom action -->
            <action>
                <condition var1="tw_has_action2" var2="1" />
                <actions>
                    <action function="%tw_action2%">%tw_action2_param%</action>
                </actions>
            </action>
        </page>

        <!-- Action completion summary page -->
        <page name="action_complete">
            <template name="page" />

            <!-- Primary header (with custom text) -->
            <text style="text_l">
                <placement x="%col1_x_header%" y="%row3_header_y%" />
                <text>%tw_complete_text1%</text>
            </text>

            <!-- Secondary header (failed) -->
            <text style="text_m_fail">
                <condition var1="tw_operation_status" op="!=" var2="0" />
                <placement x="%col1_x_header%" y="%row4_header_y%" />
                <text>{@failed}</text>
            </text>

            <!-- Secondary header (succeeded) -->
            <text style="text_m">
                <condition var1="tw_operation_status" var2="0" />
                <placement x="%col1_x_header%" y="%row4_header_y%" />
                <text>{@succeeded}</text>
            </text>

            <!-- Console output -->
            <template name="console" />

            <!-- Back button -->
            <button style="main_button_half_height">
                <placement x="%indent%" y="%row21a_y%" />
                <text>{@back}</text>
                <actions>
                    <action function="set">tw_clear_destination=%tw_back%</action>
                    <action function="page">clear_vars</action>
                </actions>
            </button>

            <!-- Reboot button -->
            <button style="main_button_half_height">
                <placement x="%center_x%" y="%row21a_y%" />
                <text>{@reboot_system_button}</text>
                <actions>
                    <action function="reboot">reboot</action>
                </actions>
            </button>

            <action>
                <touch key="home" />
                <actions>
                    <action function="set">tw_clear_destination=main2</action>
                    <action function="page">clear_vars</action>
                </actions>
            </action>

            <action>
                <touch key="back" />
                <actions>
                    <action function="set">tw_clear_destination=%tw_back%</action>
                    <action function="page">clear_vars</action>
                </actions>
            </action>
        </page>

        <!-- Autoboot countdown page -->
        <page name="autoboot">
            <action>
                <!-- Allow skipping the autoboot countdown -->
                <action function="set">tw_has_custom_action=1</action>
                <!-- Allow canceling the autoboot countdown -->
                <action function="set">tw_has_cancel=1</action>
                <!-- Head back to the main page if canceled -->
                <action function="set">tw_back=main</action>
                <!-- Call autoboot function to countdown and reboot -->
                <action function="set">tw_action=autoboot</action>
                <action function="set">tw_action_param=</action>
                <!-- Call autoboot_skip function to skip the countdown -->
                <action function="set">tw_custom_action=autoboot_skip</action>
                <action function="set">tw_custom_action_param=</action>
                <action function="set">tw_custom_action_text={@autoboot_skip_countdown}</action>
                <!-- Call autoboot_cancel function to stop the countdown -->
                <action function="set">tw_cancel_action=autoboot_cancel</action>
                <action function="set">tw_cancel_param=</action>
                <!-- No second operation -->
                <action function="set">tw_has_action2=0</action>
                <action function="set">tw_action_text1={@app_name}</action>
                <action function="set">tw_action_text2={@autoboot_header}</action>
                <action function="set">tw_complete_text1=</action>
                <!-- Go to main page if canceled -->
                <action function="set">tw_has_custom_cancel_page=1</action>
                <action function="set">tw_custom_cancel_page=main</action>
                <!-- Switch to action console page -->
                <action function="page">action_page</action>
            </action>
        </page>

        <!-- Switch ROM page -->
        <page name="switch_rom">
            <template name="page" />

            <!-- Primary header -->
            <text style="text_l">
                <placement x="%col1_x_header%" y="%row3_header_y%" />
                <text>{@switch_rom_main_title}</text>
            </text>

            <!-- Secondary header -->
            <text style="text_m">
                <placement x="%col1_x_header%" y="%row4_header_y%" />
                <text>{@switch_rom_main_desc}</text>
            </text>

            <!-- List of ROMs -->
            <listbox>
                <placement x="%indent%" y="%row1a_y%" w="%content_width%" h="%partitionlist_mount_height%" />
                <text>{@switch_rom_list_title}</text>
                <data name="tw_rom_id" />
            </listbox>

            <!-- Slider for confirming ROM switching -->
            <slider>
                <text>{@switch_rom_swipe_to_switch}</text>

                <action function="set">tw_back=switch_rom</action>
                <action function="set">tw_action=switch_rom</action>
                <action function="set">tw_action_param=%tw_rom_id%</action>
                <action function="set">tw_has_action2=0</action>
                <action function="set">tw_action_text1={@switch_rom_switching_title}</action>
                <action function="set">tw_action_text2={@switch_rom_switching_desc}</action>
                <action function="set">tw_complete_text1=</action>
                <action function="page">action_page</action>
            </slider>

            <action>
                <touch key="home" />
                <action function="page">main</action>
            </action>

            <action>
                <touch key="back" />
                <action function="page">main</action>
            </action>
        </page>

        <!-- Reboot page -->
        <page name="reboot">
            <template name="page" />

            <!-- Primary header -->
            <text style="text_l">
                <placement x="%col1_x_header%" y="%row3_header_y%" />
                <text>{@title_reboot}</text>
            </text>

            <!-- Reboot to system button -->
            <button style="main_button">
                <condition var1="tw_reboot_system" var2="1" />
                <placement x="%indent%" y="%row2a_y%" />
                <text>{@reboot_system}</text>
                <actions>
                    <action function="reboot">reboot</action>
                </actions>
            </button>

            <!-- Shut down button -->
            <button style="main_button">
                <condition var1="tw_reboot_poweroff" var2="1" />
                <placement x="%center_x%" y="%row2a_y%" />
                <text>{@reboot_poweroff}</text>
                <actions>
                    <action function="reboot">shutdown</action>
                </actions>
            </button>

            <!-- Reboot to recovery button -->
            <button style="main_button">
                <condition var1="tw_reboot_recovery" var2="1" />
                <placement x="%indent%" y="%row8_y%" />
                <text>{@reboot_recovery}</text>
                <actions>
                    <action function="reboot">reboot,recovery</action>
                </actions>
            </button>

            <!-- Reboot to bootloader button -->
            <button style="main_button">
                <condition var1="tw_reboot_bootloader" var2="1" />
                <placement x="%center_x%" y="%row8_y%" />
                <text>{@reboot_bootloader}</text>
                <actions>
                    <action function="reboot">reboot,bootloader</action>
                </actions>
            </button>

            <!-- Reboot to download mode button -->
            <button style="main_button">
                <condition var1="tw_reboot_download" var2="1" />
                <placement x="%indent%" y="%row13a_y%" />
                <text>{@reboot_download}</text>
                <actions>
                    <action function="reboot">reboot,download</action>
                </actions>
            </button>

            <action>
                <touch key="home" />
                <action function="page">main</action>
            </action>

            <action>
                <touch key="back" />
                <action function="page">main</action>
            </action>
        </page>

        <!-- General settings page -->
        <page name="settings">
            <template name="page" />

            <!-- Primary header -->
            <text style="text_l">
                <placement x="%col1_x_header%" y="%row3_header_y%" />
                <text>{@title_settings}</text>
            </text>

            <!-- Secondary header -->
            <text style="text_m">
                <placement x="%col1_x_header%" y="%row4_header_y%" />
                <text>{@settings_general_title}</text>
            </text>

            <!-- Tab bar -->
            <template name="tabs_settings" />

            <fill color="%text_color%">
                <placement x="0" y="%row_tab_y%" w="%tab5_width%" h="%tab_indicator_height%" />
            </fill>

            <!-- General options -->
            <listbox style="scrolllist">
                <placement x="%indent%" y="%row3a_y%" w="%content_width%" h="%listbox_settings_height%" />
                <icon selected="checkbox_true" unselected="checkbox_false" />
                <listitem name="{@settings_general_use24clock}">
                    <data variable="tw_military_time" />
                </listitem>
                <listitem name="{@settings_general_rev_navbar}">
                    <data variable="tw_samsung_navbar" />
                </listitem>
            </listbox>

            <!-- Autoboot timeout slider -->
            <slidervalue>
                <placement x="indent" y="%row7_y%" w="%content_width%" />
                <text>{@settings_general_autoboot_timeout}</text>
                <data variable="tw_autoboot_timeout" min="5" max="30" />
            </slidervalue>

            <!-- Restore default settings button -->
            <button style="main_button_half_height">
                <placement x="%center_x%" y="%row21a_y%" />
                <text>{@settings_general_restore_defaults}</text>
                <actions>
                    <action function="set">tw_samsung_navbar=0</action>
                    <action function="set">tw_tab_icons=0</action>
                    <action function="set">tw_autoboot_timeout=5</action>
                    <action function="restoredefaultsettings" />
                </actions>
            </button>

            <action>
                <touch key="home" />
                <action function="page">main</action>
            </action>

            <action>
                <touch key="back" />
                <action function="page">main</action>
            </action>
        </page>

        <!-- Timezone settings page -->
        <page name="settings_timezone">
            <template name="page" />

            <!-- Primary header -->
            <text style="text_l">
                <placement x="%col1_x_header%" y="%row3_header_y%" />
                <text>{@title_settings}</text>
            </text>

            <!-- Secondary header -->
            <text style="text_m">
                <placement x="%col1_x_header%" y="%row4_header_y%" />
                <text>{@settings_tz_title}</text>
            </text>

            <!-- Tab bar -->
            <template name="tabs_settings" />

            <fill color="%text_color%">
                <placement x="%tab5_col2_x%" y="%row_tab_y%" w="%tab5_width%" h="%tab_indicator_height%" />
            </fill>

            <!-- List of timezones -->
            <listbox>
                <placement x="%indent%" y="%row3_y%" w="%content_width%" h="%listbox_timezone_height%" />
                <text>{@settings_tz_select_tz}</text>
                <data name="tw_time_zone_guisel" />
                <listitem name="{@settings_tz_utcm11}">BST11;BDT</listitem>
                <listitem name="{@settings_tz_utcm10}">HST10;HDT</listitem>
                <listitem name="{@settings_tz_utcm9}">AST9;ADT</listitem>
                <listitem name="{@settings_tz_utcm8}">PST8;PDT,M3.2.0,M11.1.0</listitem>
                <listitem name="{@settings_tz_utcm7}">MST7;MDT,M3.2.0,M11.1.0</listitem>
                <listitem name="{@settings_tz_utcm6}">CST6;CDT,M3.2.0,M11.1.0</listitem>
                <listitem name="{@settings_tz_utcm5}">EST5;EDT,M3.2.0,M11.1.0</listitem>
                <listitem name="{@settings_tz_utcm4}">AST4;ADT</listitem>
                <listitem name="{@settings_tz_utcm3}">GRNLNDST3;GRNLNDDT</listitem>
                <listitem name="{@settings_tz_utcm2}">FALKST2;FALKDT</listitem>
                <listitem name="{@settings_tz_utcm1}">AZOREST1;AZOREDT</listitem>
                <listitem name="{@settings_tz_utc0}">GMT0;BST,M3.5.0,M10.5.0</listitem>
                <listitem name="{@settings_tz_utcp1}">CET-1;CEST,M3.5.0,M10.5.0</listitem>
                <listitem name="{@settings_tz_utcp2}">WET-2;WET,M3.5.0,M10.5.0</listitem>
                <listitem name="{@settings_tz_utcp3}">SAUST-3;SAUDT</listitem>
                <listitem name="{@settings_tz_utcp4}">WST-4;WDT</listitem>
                <listitem name="{@settings_tz_utcp5}">PAKST-5;PAKDT</listitem>
                <listitem name="{@settings_tz_utcp6}">TASHST-6;TASHDT</listitem>
                <listitem name="{@settings_tz_utcp7}">THAIST-7;THAIDT</listitem>
                <listitem name="{@settings_tz_utcp8}">TAIST-8;TAIDT</listitem>
                <listitem name="{@settings_tz_utcp9}">JST-9;JSTDT</listitem>
                <listitem name="{@settings_tz_utcp10}">EET-10;EETDT</listitem>
                <listitem name="{@settings_tz_utcp11}">MET-11;METDT</listitem>
                <listitem name="{@settings_tz_utcp12}">NZST-12;NZDT</listitem>
            </listbox>

            <!-- Current time zone offset text -->
            <text style="text_m_accent">
                <placement x="%indent%" y="%row15a_y%" />
                <text>{@settings_tz_select_offset}</text>
            </text>

            <!-- No time zone offset button -->
            <button style="button_quarter_width">
                <placement x="%indent%" y="%row16a_y%" />
                <text>{@settings_tz_offset_none}</text>
                <action function="set">tw_time_zone_guioffset=0</action>
            </button>

            <!-- 15 minute time zone offset button -->
            <button style="button_quarter_width">
                <placement x="%btn4_col2_x%" y="%row16a_y%" />
                <text>{@settings_tz_offset_15}</text>
                <action function="set">tw_time_zone_guioffset=15</action>
            </button>

            <!-- 30 minute time zone offset button -->
            <button style="button_quarter_width">
                <placement x="%btn4_col3_x%" y="%row16a_y%" />
                <text>{@settings_tz_offset_30}</text>
                <action function="set">tw_time_zone_guioffset=30</action>
            </button>

            <!-- 45 minute time zone offset button -->
            <button style="button_quarter_width">
                <placement x="%btn4_col4_x%" y="%row16a_y%" />
                <text>{@settings_tz_offset_45}</text>
                <action function="set">tw_time_zone_guioffset=45</action>
            </button>

            <!-- Daylight savings time checkbox -->
            <checkbox>
                <placement x="%indent%" y="%row18a_y%" />
                <font resource="font_m" color="%text_color%" />
                <text>{@settings_tz_use_dst}</text>
                <data variable="tw_time_zone_guidst" />
                <image checked="checkbox_true" unchecked="checkbox_false" />
            </checkbox>

            <!-- Current time zone text -->
            <text color="%text_color%">
                <font resource="font_m" />
                <placement x="%indent%" y="%row20_y%" />
                <text>{@settings_tz_current_tz}</text>
            </text>

            <!-- Set time zone button -->
            <button>
                <highlight color="%highlight_color%" />
                <placement x="%center_x%" y="%row21a_y%" />
                <font resource="font_m" color="%text_button_color%" />
                <text>{@settings_tz_set_tz}</text>
                <image resource="main_button_half_height" />
                <action function="setguitimezone" />
            </button>

            <action>
                <touch key="home" />
                <action function="page">main</action>
            </action>

            <action>
                <touch key="back" />
                <action function="page">main</action>
            </action>
        </page>

        <!-- Screen settings page -->
        <page name="settings_screen">
            <template name="page" />

            <!-- Primary header -->
            <text style="text_l">
                <placement x="%col1_x_header%" y="%row3_header_y%" />
                <text>{@title_settings}</text>
            </text>

            <!-- Secondary header -->
            <text style="text_m">
                <placement x="%col1_x_header%" y="%row4_header_y%" />
                <text>{@settings_screen_title}</text>
            </text>

            <!-- Tab bar -->
            <template name="tabs_settings" />

            <fill color="%text_color%">
                <placement x="%tab5_col3_x%" y="%row_tab_y%" w="%tab5_width%" h="%tab_indicator_height%" />
            </fill>

            <!-- Enable screen timeout checkbox (toggled off state) -->
            <button>
                <placement x="%indent%" y="%row3a_y%" textplacement="6" />
                <font resource="font_m" color="%text_color%" />
                <condition var1="tw_screen_timeout_secs" op="=" var2="0" />
                <condition var1="tw_no_screen_timeout" op="!=" var2="1" />
                <text>{@settings_screen_enable_timeout}</text>
                <image resource="checkbox_false" />
                <action function="set">tw_screen_timeout_secs=60</action>
            </button>

            <!-- Enable screen timeout checkbox (toggled on state) -->
            <button>
                <placement x="%indent%" y="%row3a_y%" textplacement="6" />
                <font resource="font_m" color="%text_color%" />
                <condition var1="tw_screen_timeout_secs" op="!=" var2="0" />
                <condition var1="tw_no_screen_timeout" op="!=" var2="1" />
                <text>{@settings_screen_enable_timeout}</text>
                <image resource="checkbox_true" />
                <action function="set">tw_screen_timeout_secs=0</action>
            </button>

            <!-- Screen timeout slider -->
            <slidervalue>
                <condition var1="tw_screen_timeout_secs" op="!=" var2="0" />
                <condition var1="tw_no_screen_timeout" op="!=" var2="1" />
                <placement x="indent" y="%row5_y%" w="%content_width%" />
                <text>{@settings_screen_timeout_slider}</text>
                <data variable="tw_screen_timeout_secs" min="15" max="300" />
            </slidervalue>

            <!-- Screen brightness slider -->
            <slidervalue>
                <condition var1="tw_has_brightnesss_file" var2="1" />
                <placement x="indent" y="%row10_y%" w="%content_width%" />
                <text>{@settings_screen_brightness_slider}</text>
                <data variable="tw_brightness_pct" min="10" max="100" />
                <actions>
                    <action function="set">tw_brightness=%tw_brightness_max%</action>
                    <action function="compute">tw_brightness*%tw_brightness_pct%</action>
                    <action function="compute">tw_brightness/100</action>
                    <action function="setbrightness">%tw_brightness%</action>
                </actions>
            </slidervalue>

            <action>
                <touch key="home" />
                <action function="page">main</action>
            </action>

            <action>
                <touch key="back" />
                <action function="page">main</action>
            </action>
        </page>

        <!-- Vibration settings page -->
        <page name="settings_vibration">
            <template name="page" />

            <!-- Primary header -->
            <text style="text_l">
                <placement x="%col1_x_header%" y="%row3_header_y%" />
                <text>{@title_settings}</text>
            </text>

            <!-- Secondary header -->
            <text style="text_m">
                <placement x="%col1_x_header%" y="%row4_header_y%" />
                <text>{@settings_vib_title}</text>
            </text>

            <!-- Tab bar -->
            <template name="tabs_settings" />

            <fill color="%text_color%">
                <placement x="%tab5_col4_x%" y="%row_tab_y%" w="%tab5_width%" h="%tab_indicator_height%" />
            </fill>

            <!-- Button vibration level slider -->
            <slidervalue>
                <placement x="indent" y="%row4_y%" w="%content_width%" />
                <text>{@settings_vib_button_slider}</text>
                <data variable="tw_button_vibrate" min="0" max="300" />
            </slidervalue>

            <!-- Keyboard vibration level slider -->
            <slidervalue>
                <placement x="indent" y="%row9_y%" w="%content_width%" />
                <text>{@settings_vib_keyboard_slider}</text>
                <data variable="tw_keyboard_vibrate" min="0" max="300" />
            </slidervalue>

            <!-- Action vibration level slider -->
            <slidervalue>
                <placement x="indent" y="%row14_y%" w="%content_width%" />
                <text>{@settings_vib_action_slider}</text>
                <data variable="tw_action_vibrate" min="0" max="500" />
            </slidervalue>

            <action>
                <touch key="home" />
                <action function="page">main</action>
            </action>

            <action>
                <touch key="back" />
                <action function="page">main</action>
            </action>
        </page>

        <!-- Language settings page -->
        <page name="settings_language">
            <template name="page" />

            <!-- Primary header -->
            <text style="text_l">
                <placement x="%col1_x_header%" y="%row3_header_y%" />
                <text>{@title_settings}</text>
            </text>

            <!-- Secondary header -->
            <text style="text_m">
                <placement x="%col1_x_header%" y="%row4_header_y%" />
                <text>{@settings_language_title}</text>
            </text>

            <!-- Tab bar -->
            <template name="tabs_settings" />

            <fill color="%text_color%">
                <placement x="%tab5_col5_x%" y="%row_tab_y%" w="%tab5_width%" h="%tab_indicator_height%" />
            </fill>

            <!-- Language list -->
            <listbox>
                <placement x="%indent%" y="%row3_y%" w="%content_width%" h="%listbox_settings_height%" />
                <text>{@settings_language_select_language}</text>
                <icon selected="radio_true" unselected="radio_false" />
                <data name="tw_language" />
            </listbox>

            <!-- Set language button -->
            <button style="main_button_half_height">
                <placement x="%center_x%" y="%row21a_y%" />
                <text>{@settings_language_set_language}</text>
                <action function="setlanguage"></action>
            </button>

            <action>
                <touch key="home" />
                <action function="page">main</action>
            </action>

            <action>
                <touch key="back" />
                <action function="page">settings</action>
            </action>
        </page>

        <!-- Advanced options page -->
        <page name="advanced">
            <template name="page" />

            <!-- Primary header -->
            <text style="text_l">
                <placement x="%col1_x_header%" y="%row3_header_y%" />
                <text>{@title_advanced}</text>
            </text>

            <!-- Test password decryption -->
            <button style="main_button">
                <placement x="%indent%" y="%row8_y%" />
                <text>{@title_decrypt_passwd_test}</text>
                <action function="page">decrypt</action>
            </button>

            <!-- Test pattern decryption -->
            <button style="main_button">
                <placement x="%center_x%" y="%row8_y%" />
                <text>{@title_decrypt_pattern_test}</text>
                <action function="page">decrypt_pattern</action>
            </button>

            <!-- Reload theme button -->
            <button style="main_button">
                <placement x="%center_x%" y="%row13a_y%" />
                <text>{@advanced_reload_theme}</text>
                <action function="reload" />
            </button>

            <action>
                <touch key="home" />
                <action function="page">main</action>
            </action>

            <action>
                <touch key="back" />
                <action function="page">main</action>
            </action>
        </page>

        <!-- Screen lock overlay page -->
        <page name="lock">
            <background color="%semi_transparent%" />

            <image>
                <image resource="unlock_icon" />
                <placement x="%center_x%" y="%row10_y%" placement="4" />
            </image>

            <!-- Swipe unlock slider bar -->
            <slider>
                <text>{@swipe_to_unlock}</text>
                <action function="overlay" />
            </slider>
        </page>

        <!-- Decryption page -->
        <page name="decrypt">
            <template name="page" />

            <!-- Redirect to pattern decryption page if needed -->
            <action>
                <condition var1="tw_crypto_pwtype" var2="pattern" />
                <action function="page">decrypt_pattern</action>
            </action>

            <!-- Primary header -->
            <text style="text_l">
                <placement x="%col1_x_header%" y="%row3_header_y%" />
                <text>{@decrypt_title}</text>
            </text>

            <!-- Secondary header -->
            <text style="text_m">
                <placement x="%col1_x_header%" y="%row4_header_y%" />
                <text>{@decrypt_desc}</text>
            </text>

            <text style="text_m_accent">
                <placement x="%center_x%" y="%row2_y%" placement="5" />
                <text>{@decrypt_enter_password}</text>
            </text>

            <input>
                <placement x="%indent%" y="%row3_input_y%" w="%content_width%" h="%input_height%" />
                <text>%tw_crypto_display%</text>
                <data name="tw_crypto_password" mask="*" maskvariable="tw_crypto_display" />
                <restrict minlen="1" maxlen="254" />
                <action function="page">trydecrypt</action>
            </input>

            <fill color="%accent_color%">
                <placement x="%indent%" y="row4a_y" w="%content_width%" h="input_line_width" placement="1" />
            </fill>

            <fill color="%text_fail_color%">
                <condition var1="tw_password_fail" var2="1" />
                <placement x="%indent%" y="row4a_y" w="%content_width%" h="input_line_width" placement="1" />
            </fill>

            <text style="text_m_fail">
                <condition var1="tw_password_fail" var2="1" />
                <placement x="%indent%" y="%row5_y%" />
                <text>{@decrypt_failed_password}</text>
            </text>

            <button style="main_button_half_height">
                <placement x="%indent%" y="%row10_y%" />
                <text>{@cancel}</text>
                <actions>
                    <action function="set">tw_page_done=1</action>
                    <action function="page">main</action>
                </actions>
            </button>

            <button style="main_button_half_height">
                <placement x="%center_x%" y="%row10_y%" />
                <text>{@decrypt_select_language}</text>
                <action function="overlay">select_language</action>
            </button>

            <template name="keyboardtemplate" />
        </page>

        <!-- Decryption page (pattern -->
        <page name="decrypt_pattern">
            <template name="page" />

            <!-- Primary header -->
            <text style="text_l">
                <placement x="%col1_x_header%" y="%row3_header_y%" />
                <text>{@decrypt_title}</text>
            </text>

            <!-- Secondary header -->
            <text style="text_m">
                <placement x="%col1_x_header%" y="%row4_header_y%" />
                <text>{@decrypt_desc}</text>
            </text>

            <text style="text_m_accent">
                <placement x="%center_x%" y="%row2_y%" placement="5" />
                <text>{@decrypt_enter_pattern}</text>
            </text>

            <text style="text_m_fail">
                <condition var1="tw_password_fail" var2="1" />
                <placement x="%center_x%" y="%row3_y%" placement="5" />
                <text>{@decrypt_failed_pattern}</text>
            </text>

            <patternpassword>
                <placement x="%pattern_x%" y="%row5_y%" w="%pattern_size%" h="%pattern_size%" />
                <dot color="%fileselector_linecolor%" activecolor="%accent_color%" radius="%pattern_dot_dia%" />
                <line color="%fileselector_linecolor%" width="%pattern_line_w%" />
                <data name="tw_crypto_password" />
                <action function="page">trydecrypt</action>
            </patternpassword>

            <button style="button_quarter_width">
                <placement x="%indent%" y="%row19a_y%" />
                <text>3x3</text>
                <action function="set">tw_gui_pattern_grid_size=3</action>
            </button>

            <button style="button_quarter_width">
                <placement x="%btn4_col2_x%" y="%row19a_y%" />
                <text>4x4</text>
                <action function="set">tw_gui_pattern_grid_size=4</action>
            </button>

            <button style="button_quarter_width">
                <placement x="%btn4_col3_x%" y="%row19a_y%" />
                <text>5x5</text>
                <action function="set">tw_gui_pattern_grid_size=5</action>
            </button>

            <button style="button_quarter_width">
                <placement x="%btn4_col4_x%" y="%row19a_y%" />
                <text>6x6</text>
                <action function="set">tw_gui_pattern_grid_size=6</action>
            </button>

            <button style="main_button_half_height">
                <placement x="%indent%" y="%row21a_y%" />
                <text>{@cancel}</text>
                <actions>
                    <action function="set">tw_page_done=1</action>
                    <action function="page">main</action>
                </actions>
            </button>

            <button style="main_button_half_height">
                <placement x="%center_x%" y="%row21a_y%" />
                <text>{@decrypt_select_language}</text>
                <action function="overlay">select_language</action>
            </button>
        </page>

        <!-- Decryption progress screen -->
        <page name="trydecrypt">
            <template name="page" />

            <!-- Primary header -->
            <text style="text_l">
                <placement x="%col1_x_header%" y="%row3_header_y%" />
                <text>{@decrypt_title}</text>
            </text>

            <text style="text_m">
                <placement x="%col1_x_header%" y="%row4_header_y%" />
                <text>{@decrypt_attempting_desc}</text>
            </text>

            <template name="console" />

            <template name="progress_bar" />

            <action>
                <action function="decrypt" />
            </action>

            <action>
                <conditions>
                    <condition var1="tw_operation_state" var2="1" />
                    <condition var1="tw_operation_status" op="!=" var2="0" />
                </conditions>
                <actions>
                    <action function="set">tw_password_fail=1</action>
                    <action function="page">decrypt</action>
                </actions>
            </action>

            <action>
                <conditions>
                    <condition var1="tw_operation_state" var2="1" />
                    <condition var1="tw_operation_status" op="=" var2="0" />
                </conditions>
                <actions>
                    <action function="set">tw_page_done=1</action>
                    <action function="page">main</action>
                </actions>
            </action>
        </page>

        <!-- Popup console -->
        <page name="slideout">
            <fill color="%background_color%">
                <placement x="0" y="%row2_header_y%" w="%screen_width%" h="%slideout_bg_height%" />
            </fill>

            <console>
                <placement x="%indent%" y="%row3_header_y%" w="%content_width%" h="%slideout_height%" />
            </console>

            <button>
                <fill color="%transparent%" />
                <placement x="0" y="%navbar_y%" w="%screen_width%" h="%navbar_height%" />
                <action function="overlay" />
            </button>

            <action>
                <touch key="power+voldown" />
                <action function="screenshot" />
            </action>
        </page>

        <!-- Select language dialog box -->
        <page name="select_language">
            <fill color="%semi_transparent%">
                <placement x="0" y="0" w="%screen_width%" h="%screen_height%" />
            </fill>

            <fill color="%background_color%">
                <placement x="%indent%" y="row5_y" w="%content_width%" h="%dialog_height%" />
            </fill>

            <listbox>
                <placement x="%col1_x_left%" y="%row5_y%" w="%content_overlay_width%" h="%partitionlist_storage_height%" />
                <text>{@settings_language_select_language}</text>
                <icon selected="radio_true" unselected="radio_false" />
                <data name="tw_language" />
            </listbox>

            <button style="button_third_width">
                <placement x="%dialog_button_x%" y="%row14_y%" />
                <text>{@ok}</text>
                <actions>
                    <action function="overlay" />
                    <action function="setlanguage"></action>
                </actions>
            </button>

            <fill color="#000000">
                <placement x="0" y="row25_y" w="%screen_width%" h="%navbar_height" />
            </fill>

            <button>
                <condition var1="tw_samsung_navbar" op="!=" var2="1" />
                <placement x="%back_button_x%" y="%navbar_btn_y%" placement="4" />
                <image resource="back" />
                <condition var1="tw_busy" var2="0" />
                <actions>
                    <action function="overlay" />
                    <action function="key">%tw_back%</action>
                </actions>
            </button>

            <button>
                <condition var1="tw_samsung_navbar" op="=" var2="1" />
                <placement x="%back_button_x%" y="%navbar_btn_y%" placement="4" />
                <image resource="console" />
                <condition var1="tw_busy" var2="0" />
                <action function="overlay">slideout</action>
            </button>

            <button>
                <placement x="%center_x%" y="%navbar_btn_y%" placement="4" />
                <image resource="home" />
                <condition var1="tw_busy" var2="0" />
                <actions>
                    <action function="overlay" />
                    <action function="key">home</action>
                </actions>
            </button>

            <button>
                <condition var1="tw_samsung_navbar" op="!=" var2="1" />
                <placement x="%console_button_x%" y="%navbar_btn_y%" placement="4" />
                <image resource="console" />
                <condition var1="tw_busy" var2="0" />
                <action function="overlay">slideout</action>
            </button>

            <button>
                <condition var1="tw_samsung_navbar" op="=" var2="1" />
                <placement x="%console_button_x%" y="%navbar_btn_y%" placement="4" />
                <image resource="back" />
                <condition var1="tw_busy" var2="0" />
                <actions>
                    <action function="overlay" />
                    <action function="key">%tw_back%</action>
                </actions>
            </button>

            <action>
                <touch key="power+voldown" />
                <action function="screenshot" />
            </action>
        </page>
    </pages>
</recovery>
